<div
	*ngIf="vm$ | async as vm"
	class="notes-list"
>
	<span>Selected note id: {{vm.noteOnDisplayId}}</span>

	<!-- If only destructuring was possible this would be a lot more readable -->
	<div class="button-container" *ngFor="let id of objectKeys(vm.notes)">
		<div *ngIf="vm.notes[+id].isTrashed === vm.displayingTrash">
			<button class="delete-button" (click)="trash(+id)">-</button>
			<button 
				class="note-button"
				[attr.data-note-id]="id" 
				data-test-id="select-note-button" 
				draggable="true" 
				(dragstart)="drag($event, {id: +id, props: vm.notes[+id]})"
				(click)="appStateService.setNoteOnDisplayId(+id)"
				>
				{{vm.notes[+id].name}}
			</button>
		</div>
	</div>

	<button *ngIf="!vm.displayingTrash" class="create-button"
		(click)="toggleFormVisibility(form, nameInput)"
	>+</button>
	
	<form #form [attr.id]="this.createNoteFormId"
		(submit)="onSubmitCreate($event, form, vm.groupOnDisplayId)">

		<input #nameInput name='name-input' [(ngModel)]="this.nameFormValue"
		[attr.id]="this.noteNameInputId" minlength=1 required="text"
		(blur)="onInputBlur(form)">

		<input value="create note" type="submit">
	</form>
</div>